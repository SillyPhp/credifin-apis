<?php

use yii\helpers\Url;

$this->params['header_dark'] = true;
?>
<section class="instagram-ey">
    <a href="https://www.empoweryouth.com/" class="company-logo" target="_blank">
        <div  class="logo">
            <img src="https://user-images.githubusercontent.com/72601463/127449680-82f82f6c-947f-4180-94ad-bc2f37fd37ef.png">
        </div>
        <div class="title">
            <img src="https://www.empoweryouth.com/assets/common/logos/fg2.png">
        </div>
    </a>
    <div class="insta-buttons">
        <a href="https://www.empoweryouth.com/jobs" target="_blank"><span><i class="fab fa-elementor"></i></span> Jobs</a>
        <a href="https://www.empoweryouth.com/internships" target="_blank"><span><i class="fab fa-elementor"></i></span> Internships</a>
        <a href="https://www.empoweryouth.com/education-loans" target="_blank"><span><i class="fa fa-file"></i></span> Education Loan</a>
    </div>
    <div class="posts" id="insta_post">

    </div>
    <div class="loader_screen img_load">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:transparent;display:block;" width="60px" height="60px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
            <g transform="translate(50,50)">
                <g transform="scale(0.9)">
                    <g transform="translate(-50,-50)">
                        <g>
                            <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" values="360 50 50;0 50 50" keyTimes="0;1" dur="0.9900990099009901s" keySplines="0.7 0 0.3 1" calcMode="spline"></animateTransform>
                            <path fill="#00a0e3" d="M42.9,17.8c-1.4-5.4,1.9-11,7.3-12.4c0.6-0.2,1.3-0.3,1.9-0.3l0.8,0l0,0c4-0.2,8,0.1,11.9,1.1 c3.6,0.9,7.2,2.5,10.6,4.7c3.3,2.2,6.2,4.8,8.4,7.6c2.3,3,4.2,6.2,5.4,9.7c0.3,0.9,0.6,1.8,0.9,2.7c0.2,0.9,0.4,1.8,0.6,2.7l0.1,0.6 l0.4,3.4c0,0.3,0,0.6,0,0.9l0,1.8c0,0.4,0,0.8,0,1.2c-0.1,0.9-0.2,1.8-0.2,2.7c-0.3,2-0.6,3.6-1.2,5.2c-1.1,3.5-2.6,6.6-4.6,9.3 c-2,2.8-4.4,5.2-7.1,7.2c-0.2,0.2-0.5,0.3-0.7,0.5c-0.5,0.3-1,0.7-1.4,0.9l-2.3,1.3c-1.6,0.7-3.1,1.4-4.6,1.8 c-3.3,1-6.6,1.5-9.6,1.4c-3.2-0.1-6.4-0.7-9.3-1.7c-2.9-1.1-5.6-2.6-8-4.5l-1.1-0.9c-0.2-0.2-0.4-0.3-0.6-0.5l-1.6-1.6 c-1.6-1.8-3-3.8-4.1-5.9c1.4,1.9,3.1,3.5,4.9,5c0.8,0.6,1.7,1.3,2.6,1.8l1.1,0.6c2.5,1.3,5.1,2.2,7.9,2.8c2.6,0.4,5.4,0.4,8,0 c2.4-0.3,5-1.2,7.5-2.4c1.1-0.5,2-1.1,2.9-1.7l1.9-1.5c0.3-0.3,0.6-0.6,0.9-0.8c0.1-0.1,0.3-0.3,0.4-0.4l0.1-0.1 c1.7-1.8,3.1-3.8,4.2-6.1c1-2.1,1.6-4.4,1.9-6.8c0.2-1,0.2-2,0.1-2.8l0-0.6l0-0.3c-0.1-0.5-0.1-1-0.1-1.4c0-0.4-0.1-0.8-0.2-1.1 l-0.2-1c0-0.2-0.1-0.3-0.1-0.5L78,37.7l-0.4-1c-0.2-0.4-0.4-0.9-0.6-1.3L77,35.1c-0.2-0.4-0.5-0.8-0.7-1.2l-0.1-0.1 c-1.1-1.8-2.5-3.5-4.1-4.9c-1.5-1.3-3.2-2.4-5.4-3.2c-2.1-0.8-4-1.2-5.8-1.3C53.9,24.2,45.5,27.5,42.9,17.8z"></path>
                            <path fill="#ff7803" d="M33.2,74.3c-2.1-0.9-3.9-1.9-5.4-3.2c-1.6-1.4-3-3-4.1-4.9l-0.1-0.1c-0.2-0.4-0.4-0.8-0.7-1.2l-0.1-0.3 c-0.2-0.4-0.4-0.9-0.6-1.3c-3.2-8.4-0.9-17.9,5.7-24.1c9-8.4,22.7-8,32.3-0.9c1.8,1.5,3.5,3.1,4.9,5c-1.1-2.2-2.5-4.1-4.1-5.9 C44.8,20.4,17,28.7,10.2,50.4c-0.5,1.6-0.8,3.2-1.2,5.2c-0.1,0.9-0.2,1.8-0.2,2.7c0,0.4,0,0.8,0,1.2l0,1.9c0,0.3,0,0.6,0,0.9 l0.4,3.4l0.1,0.6c0.2,0.9,0.4,1.8,0.6,2.7c0.3,0.9,0.6,1.8,0.9,2.7c1.3,3.5,3.1,6.7,5.4,9.7c2.2,2.9,5.1,5.4,8.4,7.6 c3.4,2.2,7,3.8,10.6,4.7c3.8,1,7.8,1.4,11.9,1.1l0,0l0.8,0c0.6,0,1.3-0.1,1.9-0.3c2.6-0.7,4.8-2.4,6.2-4.7c1.4-2.3,1.8-5.1,1.1-7.7 c-1.4-5.4-7-8.7-12.4-7.3c-1.9,0.5-3.7,0.7-5.6,0.6C37.3,75.5,35.3,75.1,33.2,74.3z"></path>
                        </g></g></g></g>
        </svg>
    </div>
</section>
<?php
$this->registerCSS('
.instagram-ey{
    font-family: Roboto;
    max-width:750px;
    margin:0 auto;
    margin-top:15px;
}
.company-logo {
    display: flex;
    align-items: center;
    padding: 10px 10px 20px;
    flex-wrap:wrap;
}
.company-logo .title img{
    width: 200px;
    margin-left: 15px;
}
.company-logo .logo{
    box-shadow: 0px 0px 5px 1px rgba(0, 0, 0, 0.25);
    border-radius: 50%;
    width: 120px;
    min-width: 120px;
    height: 120px;
    line-height: 120px;
    text-align: center;
}
.insta-buttons {
    text-align: center;
    border-top: 1px solid #c5c5c5;
    margin-bottom: 15px;
}
.insta-buttons a {
    display: inline-block;
    color: #909090;
    text-align: center;
    text-decoration: none;
    transition: 200ms all ease-in;
    font-family: roboto;
    font-weight: 500;
    margin: 0 20px;
    font-size: 15px;
    border-top: 2px solid transparent;
    margin-top: -1px;
    padding: 15px 20px 0;
}
.insta-buttons a:hover{
    border-top: 2px solid #00a0e3;
    color:#00a0e3;
}
.posts {
    display: flex;
    flex-wrap: wrap;
    align-items: flex-start;
    justify-content: flex-start;
}
.post {
    position: relative;
    flex-basis: 32.66%;
    margin-bottom: 1%;
    margin-right: 1%;
}
.post:nth-child(3n+3) { margin-right: 0; }
.post img{
  width: 100%;
  height: auto;
}
@media screen and (max-width: 500px) {
.insta-buttons a{margin:0; padding:10px 5px 0;}
.company-logo .logo{
    width: 80px;
    min-width: 80px;
    height: 80px;
    min-height: 80px;
    line-height: 80px;
}
}
');
?>
<script id="insta_posts" type="text/template">
    {{#.}}
    <a href="{{slug}}" class="post" target="_blank">
        <img src="{{featured_image}}" alt="{{featured_image_alt}}">
    </a>
    {{/.}}
</script>
<?php
$script = <<<JS
let loadmorecards = true;
let loading = true
var offset = 0;
fetchData(template=$('#insta_post'),limit_dept=15,offset=0,loader=true);
function fetchData(template,limit_dept,offset,loader) {
  $.ajax({
  url:'/site/get-instagram',
  method:'Post',
  datatype:"json",
  data:{
      'limit':limit_dept,
      'offset':offset,
  },
  beforeSend: function(){
     if (loader) {
            $('.img_load').css('display','block');
        }
      },
  success:function(body) {
      $('.img_load').css('display','none');
      if(body.count < 1){
       loadmorecards = false;   
      } else {
          template.append(Mustache.render($('#insta_posts').html(),body.cards));
      }
  }   
  })
}
$(window).scroll(function() { //detact scroll
    if($(window).scrollTop() + $(window).height() >= $(document).height() - 150){ //scrolled to bottom of the page
        if(loading && loadmorecards){
            loading = false;
            fetchData(template=$('#insta_post'),limit_dept=15,offset = offset+15,loader=true);
            setTimeout(
                function(){
                    loading = true;
            }, 1500);
        }
    }
});
JS;
$this->registerJs($script);
$this->registerJsFile('https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js', ['depends' => [\yii\web\JqueryAsset::className()]]);
?>

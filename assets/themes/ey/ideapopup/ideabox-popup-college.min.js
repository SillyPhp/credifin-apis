function starRateSetter(e){for(var t=e.parentElement.parentElement.getAttribute("data-last-val"),i=e.value,a=e.parentElement,n=0;n<a.parentElement.childNodes.length;n++)a.parentElement.childNodes[n].classList.remove("i-full");if(t==i)e.checked=!1,e.parentElement.parentElement.setAttribute("data-last-val","");else{for(a.classList.add("i-full");a=a.nextSibling;)a.classList.add("i-full");e.parentElement.parentElement.setAttribute("data-last-val",i)}}!function(e){"use strict";e.ideaboxPopupCollege=function(){this.reviewModal=null,this.startButton=null,this.cancelButton=null,this.endCloseButton=null,this.nextButton=null,this.overlayButton=null,this.active=0,this.validate=!0,this.values={};arguments[0]&&"object"==typeof arguments[0]&&(this.options=A({autoOpen:!1,closeButton:!0,closeEscape:!0,closeOverlay:!0,background:"#EA5455",popupView:"boxed",maxWidth:900,ratio:"16:9",overlayColor:"rgba(0,0,0,0.7)",startPage:null,finishPage:null,data:null,onFinish:null,onOpen:null,onClose:null},arguments[0])),t.call(this),!0===this.options.autoOpen&&this.open()},ideaboxPopupCollege.prototype.close=function(){var t=this;t.reviewModal.classList.remove("i-opened"),t.reviewModal.classList.add("i-close-animation"),setTimeout(function(){t.reviewModal.classList.remove("i-close-animation"),t.reviewModal.style.cssText="display:none;",B.call(t),"boxed"==t.options.popupView&&e.removeEventListener("resize",D),"function"==typeof t.options.onClose&&t.options.onClose.call(t)},1e3)},ideaboxPopupCollege.prototype.open=function(){var t=this;t.reviewModal.style.cssText="display:block;",setTimeout(function(){t.reviewModal.classList.add("i-open-animation"),"boxed"==t.options.popupView&&(e.addEventListener("resize",D=i.bind(t)),i.call(t)),setTimeout(function(){t.reviewModal.classList.add("i-opened"),t.reviewModal.classList.remove("i-open-animation"),a.call(t),"function"==typeof t.options.onOpen&&t.options.onOpen.call(t)},1200)},10)},ideaboxPopupCollege.prototype.next=function(e){var t=0;this.options.hasOwnProperty("data")&&null!=this.options.data&&(t=this.options.data.length),"start"!=e&&(this.validate=!0,E(this.active,this),this.validate?this.active++:N(this.active,this)),this.active<t?this.validate&&(C.call(this),s(this.active,this)):(C.call(this),x(this)?n.call(this):this.close.call(this),"function"==typeof this.options.onFinish&&this.options.onFinish.call(this))};var t=function(){this.options.closeButton&&w.call(this),g.call(this),f.call(this);var e=document.createElement("span");null!=this.options.startPage?e.className="i-review-navigation-count i-review-hide":e.className="i-review-navigation-count",e.innerHTML="<b>00</b>/00",this.reviewModal=document.createElement("div"),this.reviewModal.className="i-review-box",this.reviewModal.innerHTML='<div class="i-review-container"><div class="i-review-content-box"><div class="i-review-content"><div class="i-review-animated-box"></div></div><div class="i-review-navigation"></div><div class="i-review-action"><span class="i-review-error"></span></div></div></div>',this.options.closeButton&&this.reviewModal.getElementsByClassName("i-review-content-box")[0].appendChild(this.closeButton),y("init",this),this.reviewModal.getElementsByClassName("i-review-action")[0].appendChild(this.nextButton),this.reviewModal.getElementsByClassName("i-review-navigation")[0].appendChild(e),this.reviewModal.appendChild(this.overlayButton),document.body.appendChild(this.reviewModal);var t=this;document.addEventListener("keyup",function(e){27===e.keyCode&&t.close(t)}),"boxed"==this.options.popupView&&i.call(this)},i=function(){var t=e.innerWidth,i=e.innerHeight,a=.5625;if(this.options.hasOwnProperty("ratio")){var n=this.options.ratio.split(":");isNaN(parseInt(n[1],10))||isNaN(parseInt(n[0],10))||(a=parseInt(n[1],10)/parseInt(n[0],10))}var s=1e3;this.options.hasOwnProperty("maxWidth")&&(s=this.options.maxWidth),s+20>t&&(s=t-20);var o=this.options.maxWidth*a,r=(t-s)/2,l=(i-o)/2;l<10&&(l=10,o=i-20),this.reviewModal.getElementsByClassName("i-review-container")[0].style.cssText="right:inherit; bottom:inherit; max-width:"+s+"px; height:"+o+"px; left:"+r+"px; top:"+l+"px;"},a=function(){if(b(this)){p.call(this),y("init",this);var e=this.reviewModal.getElementsByClassName("i-review-animated-box")[0],t=document.createElement("div");if(t.className="i-review-start-end-container",v.call(this),this.options.startPage.hasOwnProperty("msgTitle")&&""!=this.options.startPage.msgTitle){var i=document.createElement("h2");i.className="i-review-start-end-title",i.innerHTML=this.options.startPage.msgTitle,t.appendChild(i)}if(this.options.startPage.hasOwnProperty("msgDescription")&&""!=this.options.startPage.msgDescription){var a=document.createElement("div");a.className="i-review-start-end-desc",a.innerHTML=this.options.startPage.msgDescription,t.appendChild(a)}m.call(this),t.appendChild(this.startButton),1==this.options.startPage.showCancelBtn&&(h.call(this),t.appendChild(this.cancelButton)),e.appendChild(t),this.startButton.focus(),this.options.startPage.hasOwnProperty("inAnimation")?S(this,this.options.startPage.inAnimation):S(this,"i-review-default-animation")}else this.active=0,s(this.active,this)},n=function(){p.call(this),y("end",this);var e=this.reviewModal.getElementsByClassName("i-review-animated-box")[0];v.call(this);var t=document.createElement("div");if(t.className="i-review-start-end-container",this.options.endPage.hasOwnProperty("msgTitle")&&""!=this.options.endPage.msgTitle){var i=document.createElement("h2");i.className="i-review-start-end-title",i.innerHTML=this.options.endPage.msgTitle,t.appendChild(i)}if(this.options.endPage.hasOwnProperty("msgDescription")&&""!=this.options.endPage.msgDescription){var a=document.createElement("div");a.className="i-review-start-end-desc",a.innerHTML=this.options.endPage.msgDescription,t.appendChild(a)}this.options.endPage.showCloseBtn&&(u.call(this),t.appendChild(this.endCloseButton)),e.appendChild(t),this.options.endPage.hasOwnProperty("inAnimation")?S(this,this.options.endPage.inAnimation):S(this,"i-review-default-animation")},s=function(e,t){y(e,t),d(e,t),c(e,t);var i=o(e,t),a="";t.options.data[e].hasOwnProperty("answerType")&&(a=l(e,t));var n=r(e,t);t.reviewModal.getElementsByClassName("i-review-animated-box")[0].innerHTML=i+a+n,t.options.data[e].hasOwnProperty("inAnimation")?S(t,t.options.data[e].inAnimation):S(t,"i-review-default-animation")},o=function(e,t){var i=P(e,"question",t);return""!=i&&(i='<div class="i-review-question"><h1 class="i-review-question-title">'+i+"</h1></div>"),i},r=function(e,t){var i=P(e,"description",t);return""!=i&&(i='<div class="i-review-description">'+i+"</div>"),i},l=function(e,t){switch(t.options.data[e].answerType){case"inputbox":return'<div class="i-review-answer"><input type="text" placeHolder="'+P(n=e,"placeHolder",s=t)+'" name="'+P(n,"formName",s)+'" class="i-review-input"></div>';case"checkbox":return function(e,t){var i="";if(t.options.data[e].hasOwnProperty("choices"))for(var a=0;a<t.options.data[e].choices.length;a++){var n=q();i+='<div class="i-review-input-group" for="cb1"><input name="'+t.options.data[e].formName+'" class="i-review-input-checkbox" type="checkbox" value="'+t.options.data[e].choices[a].value+'" id="'+n+'"><label for="'+n+'">'+t.options.data[e].choices[a].label+"</label></div>"}else console.log('"checkbox" form type must have -choices- parameters!');var s="";return t.options.data[e].hasOwnProperty("display")&&"inline"==t.options.data[e].display&&(s=" i-inline-answer-list"),'<div class="i-review-answer'+s+'">'+i+"</div>"}(e,t);case"selectbox":return function(e,t){var i="";if(t.options.data[e].hasOwnProperty("choices"))for(var a=0;a<t.options.data[e].choices.length;a++)i+='<option value="'+t.options.data[e].choices[a].value+'">'+t.options.data[e].choices[a].label+"</option>";else console.log('"selectbox" form type must have -choices- parameters!');return'<div class="i-review-answer"><label class="i-review-select-label"><select name="'+t.options.data[e].formName+'" class="i-review-selectbox">'+i+"</select></label></div>"}(e,t);case"radio":return function(e,t){var i="";if(t.options.data[e].hasOwnProperty("choices"))for(var a=0;a<t.options.data[e].choices.length;a++){var n=q();i+='<div class="i-review-input-group" for="cb1"><input name="'+t.options.data[e].formName+'" class="i-review-input-radio" type="radio" value="'+t.options.data[e].choices[a].value+'" id="'+n+'"><label for="'+n+'">'+t.options.data[e].choices[a].label+"</label></div>"}else console.log('"radio" form type must have -choices- parameters!');var s="";return t.options.data[e].hasOwnProperty("display")&&"inline"==t.options.data[e].display&&(s=" i-inline-answer-list"),'<div class="i-review-answer'+s+'">'+i+"</div>"}(e,t);case"starrate":return function(e,t){var i="",a=5;t.options.data[e].hasOwnProperty("starCount")&&(a=t.options.data[e].starCount);for(var n=0;n<a;n++)i+='<label class="i-review-star"><input onClick="starRateSetter(this);" type="radio" name="'+t.options.data[e].formName+'" value="'+(a-n)+'"/></label>';return'<div class="i-review-answer i-review-answer-center"><div class="i-review-rate-stars" data-last-val="">'+i+"</div></div>"}(e,t);case"textarea":return'<div class="i-review-answer"><textarea placeHolder="'+P(i=e,"placeHolder",a=t)+'" name="'+P(i,"formName",a)+'" class="i-review-textarea"></textarea></div>';default:return!1}var i,a,n,s},d=function(e,t){var i=t.reviewModal.getElementsByClassName("i-review-navigation-count");i[0].classList.remove("i-review-hide");var a=e+1;a<10&&(a="0"+a);var n=t.options.data.length;n<10&&(n="0"+n),i[0].innerHTML="<b>"+a+"</b>/"+n},c=function(e,t){t.nextButton.classList.remove("i-review-hide");var i=t.nextButton.getElementsByClassName("i-review-button-text");t.options.data[e].hasOwnProperty("nextLabel")&&""!=t.options.data[e].nextLabel?(i[0].innerText=t.options.data[e].nextLabel,i[0].classList.remove("i-review-hide")):(i[0].innerText="",i[0].classList.add("i-review-hide")),t.nextButton.focus()},p=function(){this.reviewModal.getElementsByClassName("i-review-navigation-count")[0].classList.add("i-review-hide"),this.nextButton.classList.add("i-review-hide")},v=function(){this.reviewModal.getElementsByClassName("i-review-animated-box")[0].innerHTML=""},h=function(){this.cancelButton=document.createElement("button"),this.cancelButton.className="i-review-next";var e=document.createElement("span");e.className="i-review-button-text",this.options.startPage.hasOwnProperty("cancelBtnText")?e.innerText=this.options.startPage.cancelBtnText:e.innerText="Cancel",this.cancelButton.appendChild(e),this.cancelButton.addEventListener("click",this.close.bind(this))},u=function(){this.endCloseButton=document.createElement("button"),this.endCloseButton.className="i-review-next";var e=document.createElement("span");e.className="i-review-button-text",this.options.endPage.hasOwnProperty("closeBtnText")?e.innerText=this.options.endPage.closeBtnText:e.innerText="Close",this.endCloseButton.appendChild(e),this.endCloseButton.addEventListener("click",this.close.bind(this))},m=function(){this.startButton=document.createElement("button"),this.startButton.className="i-review-next";var e=document.createElement("span");e.className="i-review-button-text",e.innerText=this.options.startPage.startBtnText,this.startButton.appendChild(e),this.options.startPage.hasOwnProperty("startBtnText")&&""!=this.options.startPage.startBtnText||e.classList.add("i-review-hide");var t=document.createElement("span");t.className="i-review-next-icon",this.startButton.appendChild(t),this.startButton.addEventListener("click",this.next.bind(this,"start"))},w=function(){this.closeButton=document.createElement("div"),this.closeButton.className="i-review-close",this.closeButton.addEventListener("click",this.close.bind(this))},g=function(){this.overlayButton=document.createElement("div"),this.options.closeOverlay?this.overlayButton.className="i-review-overlay":this.overlayButton.className="i-review-overlay i-review-nolink",this.overlayButton.style.cssText="background:"+this.options.overlayColor,this.options.closeOverlay&&this.overlayButton.addEventListener("click",this.close.bind(this))},f=function(){this.nextButton=document.createElement("button"),b(this)?this.nextButton.className="i-review-next i-review-hide":this.nextButton.className="i-review-next";var e=document.createElement("span");e.className="i-review-button-text",e.innerText="",this.nextButton.appendChild(e);var t=document.createElement("span");t.className="i-review-next-icon",this.nextButton.appendChild(t),this.nextButton.addEventListener("click",this.next.bind(this))},y=function(e,t){var i="";"init"==e?b(t)&&t.options.startPage.hasOwnProperty("background")&&""!=t.options.startPage.background&&(i=t.options.startPage.background):"end"==e?x(t)&&t.options.endPage.hasOwnProperty("background")&&""!=t.options.endPage.background&&(i=t.options.endPage.background):isNaN(e)||t.options.data[e].hasOwnProperty("background")&&""!=t.options.data[e].background&&(i=t.options.data[e].background),""!=i?t.reviewModal.getElementsByClassName("i-review-content-box")[0].style.cssText="background:"+i:t.options.hasOwnProperty("background")&&""!=t.options.background?t.reviewModal.getElementsByClassName("i-review-content-box")[0].style.cssText="background:"+t.options.background:t.reviewModal.getElementsByClassName("i-review-content-box")[0].removeAttribute("style")},b=function(e){return null!=e.options.startPage&&""!=e.options.startPage&&0!=e.options.startPage},x=function(e){return null!=e.options.endPage&&""!=e.options.endPage&&0!=e.options.endPage},P=function(e,t,i){return i.options.data[e].hasOwnProperty(t)?i.options.data[e][t]:""},B=function(){this.active=0,b(this)?(y("init",this),p.call(this)):(y(0,this),d(0,this),c(0,this)),this.validate=!0,C.call(this),this.reviewModal.getElementsByClassName("i-review-animated-box")[0].innerHTML=""},N=function(e,t){var i="";t.options.data[e].hasOwnProperty("errorMsg")&&(i=t.options.data[e].errorMsg),t.reviewModal.getElementsByClassName("i-review-error")[0].innerHTML=i},C=function(){this.reviewModal.getElementsByClassName("i-review-error")[0].innerHTML=""},E=function(e,t){if(t.options.data[e].hasOwnProperty("answerType")&&null!=t.options.data[e].answerType)switch(t.options.data[e].answerType){case"inputbox":M(e,t);break;case"textarea":O(e,t);break;case"selectbox":T(e,t);break;case"checkbox":L(e,t);break;case"radio":k(e,t);break;case"starrate":H(e,t);break;default:console.log("Unexpected answer type for validate!")}},M=function(e,t){var i=t.reviewModal.getElementsByClassName("i-review-input")[0].value;t.values[t.options.data[e].formName]=i,t.options.data[e].hasOwnProperty("required")&&1==t.options.data[e].required&&(t.options.data[e].hasOwnProperty("validate")?"email"==t.options.data[e].validate?t.validate=W(i):"number"==t.options.data[e].validate&&(t.validate=z(i)):""==i&&(t.validate=!1))},T=function(e,t){var i=t.reviewModal.getElementsByClassName("i-review-selectbox")[0].value;t.values[t.options.data[e].formName]=i,t.options.data[e].hasOwnProperty("required")&&1==t.options.data[e].required&&""==i&&(t.validate=!1)},O=function(e,t){var i=t.reviewModal.getElementsByClassName("i-review-textarea")[0].value;t.values[t.options.data[e].formName]=i,t.options.data[e].hasOwnProperty("required")&&1==t.options.data[e].required&&""==i&&(t.validate=!1)},L=function(e,t){for(var i=t.reviewModal.getElementsByClassName("i-review-input-checkbox"),a=[],n=0;n<i.length;n++)i[n].checked&&a.push(i[n].value);t.values[t.options.data[e].formName]=a,t.options.data[e].hasOwnProperty("required")&&1==t.options.data[e].required&&(t.options.data[e].hasOwnProperty("minSelect")&&a.length<t.options.data[e].minSelect&&(t.validate=!1),t.options.data[e].hasOwnProperty("maxSelect")&&a.length>t.options.data[e].maxSelect&&(t.validate=!1),a.length<1&&(t.validate=!1))},k=function(e,t){var i=t.reviewModal.getElementsByClassName("i-review-input-radio"),a=[];t.values[t.options.data[e].formName]="";for(var n=0;n<i.length;n++)i[n].checked&&(a.push(i[n].value),t.values[t.options.data[e].formName]=i[n].value);t.options.data[e].hasOwnProperty("required")&&1==t.options.data[e].required&&a.length<1&&(t.validate=!1)},H=function(e,t){var i="";try{i=t.reviewModal.querySelector('input[name="'+t.options.data[e].formName+'"]:checked').value,t.values[t.options.data[e].formName]=i}catch(a){t.values[t.options.data[e].formName]=i}t.options.data[e].hasOwnProperty("required")&&1==t.options.data[e].required&&""==i&&(t.validate=!1)},q=function(){(new Date).getTime();return"f"+Math.floor(99999901*Math.random())+100},A=function(e,t){var i;for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},S=function(e,t){var i=e.reviewModal.getElementsByClassName("i-review-animated-box")[0];i.classList.add("animated"),i.classList.add(t),setTimeout(function(){i.classList.remove("animated"),i.classList.remove(t)},400)},D=function(){},W=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},z=function(e){return"0"===e||Number(e)>0}}(window);